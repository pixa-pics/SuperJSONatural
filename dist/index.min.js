"use strict";var SuperJSONatural=function e(){if(!(this instanceof e))return new e},base64abcCC=Uint8Array.of(65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47);SuperJSONatural.bytesToBase64=function(e){var r=2,a=0,t=0|e.length,n=t%3,o=(Math.floor(t/3),4*Math.ceil(t/3)),i=new Uint8Array(o);for(r=2,a=0;(0|r)<(0|t);r=(r+3|0)>>>0,a=(a+4|0)>>>0)i[a]=255&base64abcCC[e[r-2|0]>>2],i[a+1|0]=255&base64abcCC[(3&e[r-2|0])<<4|e[r-1|0]>>4],i[a+2|0]=255&base64abcCC[(15&e[r-1|0])<<2|e[r]>>6],i[a+3|0]=255&base64abcCC[63&e[r]];(0|r)==(t+1|0)&&(i[a]=255&base64abcCC[e[r-2|0]>>2],i[a+1|0]=255&base64abcCC[(3&e[r-2|0])<<4],i[a+2|0]=255&"=".charCodeAt(0),i[a+3|0]=255&"=".charCodeAt(0),a=(a+4|0)>>>0),(0|r)==(0|t)&&(i[a]=255&base64abcCC[e[r-2|0]>>2],i[a+1|0]=255&base64abcCC[(3&e[r-2|0])<<4|e[r-1|0]>>4],i[a+2|0]=255&base64abcCC[(15&e[r-1|0])<<2],i[a+3|0]=255&"=".charCodeAt(0),a=(a+4|0)>>>0);var f="";for(r=0;r<i.length;r=(r+1024|0)>>>0)f=f.concat(String.fromCharCode.apply(null,i.subarray(r,Math.min(r+1024|0,i.length))));return f};var base64error_code=255,base64codes=Uint8Array.of(255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51),base64codes_length=0|base64codes.length;function charCodeAt(e){return 255&e.charCodeAt(0)}function getBase64CodesBufferResults(e){return Uint8Array.of(e>>16,e>>8&255,255&e)}function getBase64CodesBufferResultsBy4(e,r,a,t){return Uint8Array.of(e>>16,e>>8&255,255&e,r>>16,r>>8&255,255&r,a>>16,a>>8&255,255&a,t>>16,t>>8&255,255&t)}function getBase64Code(e){return(0|base64codes[255&(0|e)])>>>0}function getBase64CodesBuffer(e){return(getBase64Code(e[0])<<18|getBase64Code(e[1])<<12|getBase64Code(e[2])<<6|getBase64Code(e[3])|0)>>>0}SuperJSONatural.base64ToBytes=function(e,r){r|=0;for(var a=0,t=0,n=0|e.length,o=Uint8Array.from(n-r|0);(r+4|0)<(0|n);r=(r+4|0)>>>0,t=(t+4|0)>>>0)o[0|t]=255&e.charCodeAt(0|r),o[t+1|0]=255&e.charCodeAt(r+1|0),o[t+2|0]=255&e.charCodeAt(r+2|0),o[t+3|0]=255&e.charCodeAt(r+3|0);for(;(0|r)<(0|n);r=(r+1|0)>>>0,t=(t+1|0)>>>0)o[0|t]=255&e.charCodeAt(0|r);var i=e.endsWith("==")?2:e.endsWith("=")?1:0,f=0|o.length,u=new Uint8Array(f/4*3),s=new Uint8Array(16);for(t=0;(t+16|0)<(0|f);t=(t+16|0)>>>0,a=(a+12|0)>>>0)s.set(o.subarray(t,t+16|0)),u.set(getBase64CodesBufferResultsBy4(getBase64CodesBuffer(s.subarray(0,4)),getBase64CodesBuffer(s.subarray(4,8)),getBase64CodesBuffer(s.subarray(8,12)),getBase64CodesBuffer(s.subarray(12,16))),a);for(;(0|t)<(0|f);t=(t+4|0)>>>0,a=(a+3|0)>>>0)u.set(getBase64CodesBufferResults(getBase64CodesBuffer(o.subarray(t,t+4|0))),a);return u.slice(0,u.length-i|0)},SuperJSONatural.TYPES=[{id:0,name:"undefined",fixed:!0,bytes:0,header:0,typeof:"undefined",instanceof:void 0},{id:1,name:"null",fixed:!0,bytes:0,header:0,typeof:"object",instanceof:void 0},{name:"NaN",id:2,fixed:!0,bytes:0,header:0,typeof:"number",instanceof:Object},{name:"Infinity",id:3,fixed:!0,bytes:0,header:0,typeof:"number",instanceof:void 0},{name:"Boolean",id:4,fixed:!0,bytes:1,header:0,typeof:"boolean",instanceof:void 0},{name:"Int32",id:5,fixed:!0,bytes:4,header:0,typeof:"number",instanceof:void 0},{name:"Uint32",id:6,fixed:!0,bytes:4,header:0,typeof:"number",instanceof:void 0},{name:"Float32",id:7,fixed:!0,bytes:4,header:0,typeof:"number",instanceof:void 0},{name:"BigInt64",id:8,fixed:!0,bytes:8,header:0,typeof:"number",instanceof:void 0},{name:"Float64",id:9,fixed:!0,bytes:4,header:0,typeof:"number",instanceof:void 0},{name:"String",id:10,fixed:!1,bytes:0,header:2,typeof:"string",instanceof:""},{name:"ArrayBuffer",id:11,fixed:!1,bytes:0,header:2,typeof:"object",instanceof:ArrayBuffer},{name:"Int8Array",id:12,fixed:!1,bytes:0,header:2,typeof:"object",instanceof:Int8Array},{name:"Uint8Array",id:13,fixed:!1,bytes:0,header:2,typeof:"object",instanceof:Uint8Array},{name:"Uint8ClampedArray",id:14,fixed:!1,bytes:0,header:2,typeof:"object",instanceof:Uint8ClampedArray},{name:"Int16Array",id:15,fixed:!1,lbytes:2,bytes:0,header:2,typeof:"object",instanceof:Int16Array},{name:"Uint16Array",id:16,fixed:!1,bytes:0,header:2,typeof:"object",instanceof:Uint16Array},{name:"Int32Array",id:17,fixed:!1,bytes:0,header:2,typeof:"object",instanceof:Int32Array},{name:"Uint32Array",id:18,fixed:!1,bytes:0,header:2,typeof:"object",instanceof:Uint32Array},{name:"Float32Array",id:19,fixed:!1,bytes:0,header:2,typeof:"object",instanceof:Float32Array},{name:"Float64Array",id:20,fixed:!1,lbytes:2,bytes:0,header:2,typeof:"object",instanceof:Float64Array},{name:"BigInt64Array",id:21,fixed:!1,bytes:0,header:2,typeof:"object",instanceof:BigInt64Array},{name:"BigUint64Array",id:22,fixed:!1,bytes:0,header:2,typeof:"object",instanceof:BigUint64Array},{name:"Array",id:23,fixed:!1,bytes:0,header:2,typeof:"object",instanceof:Array},{name:"Object",id:24,fixed:!1,bytes:0,header:2,typeof:"object",instanceof:""}],SuperJSONatural.getTypeFromData=function(e){switch(typeof e){case"object":if(null==e)return SuperJSONatural.TYPES[1];if(e instanceof ArrayBuffer)return SuperJSONatural.TYPES[11];if("buffer"in e){if(e.buffer instanceof ArrayBuffer){for(var r=12;r<=22;r++)if(e instanceof SuperJSONatural.TYPES[r].instanceof)return SuperJSONatural.TYPES[r];return SuperJSONatural.TYPES[24]}return SuperJSONatural.TYPES[24]}return e instanceof Array?SuperJSONatural.TYPES[23]:SuperJSONatural.TYPES[24];case"number":return e==1/0?SuperJSONatural.TYPES[3]:NaN==e?SuperJSONatural.TYPES[2]:e!==(0|e)?SuperJSONatural.TYPES[7]:(e|=0)<0?e<-2147483648?SuperJSONatural.TYPES[8]:SuperJSONatural.TYPES[5]:e<=4294967295?SuperJSONatural.TYPES[6]:SuperJSONatural.TYPES[8];case"string":return SuperJSONatural.TYPES[10];case"undefined":default:return SuperJSONatural.TYPES[0];case"bigint":return SuperJSONatural.TYPES[8];case"boolean":return SuperJSONatural.TYPES[4]}},SuperJSONatural.prototype.stringify=function(e){var r=null;return r=function e(r,a,t,n){var o=t(a);return o.id<=22&&o.id>=12?r="$TA_"+o.id+"_B64$"+n(a.buffer):23===o.id?(r=Array.from(a)).forEach((function(a,o){r[o]=e(null,a,t,n)})):24===o.id?(r=Object.assign({},a),Object.entries(r).forEach((function(a){r[a[0]]=e(null,a[1],t,n)}))):r=a,r}(r,e,SuperJSONatural.getTypeFromData,(function(e){return SuperJSONatural.bytesToBase64(new Uint8Array(e))})),JSON.stringify(r)},SuperJSONatural.prototype.parse=function(e){return function e(r,a,t,n,o){var i=n(a);if(10===i.id)if(a.startsWith("$TA_")){var f=parseInt(a.charAt(4)+a.charAt(5),10);r=new t[0|f].instanceof(o(a,11))}else r=a;else 23===i.id?a.forEach((function(a,i){r[i]=e([],a,t,n,o)})):24===i.id?Object.keys(a).forEach((function(i){r[i]=e({},a[i],t,n,o)})):r=a;return r}([],JSON.parse(e),SuperJSONatural.TYPES,SuperJSONatural.getTypeFromData,(function(e){return SuperJSONatural.base64ToBytes(e).buffer}))},"undefined"!=typeof module?module.exports=SuperJSONatural:window.SuperJSONatural=SuperJSONatural;
