!function(){var e={exports:{}},t=function e(t){if(!(this instanceof e))return new e;this.chunck_size_=0|t||4096,this.packed_head_=new Uint8Array(this.chunck_size_),this.packed_body_=new Uint8Array(this.chunck_size_)};Object.defineProperty(t.prototype,"chunck_size",{get:function(){return this.chunck_size_}}),Object.defineProperty(t.prototype,"packed_head",{get:function(){return this.packed_head_},set:function(e){this.packed_head_=e}}),Object.defineProperty(t.prototype,"packed_body",{get:function(){return this.packed_body_},set:function(e){this.packed_body_=e}});var n=Uint8Array.of(65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47);t.prototype.bytesToBase64=function(e){var t=2,r=0,a=0|e.length,i=(Math.floor(a/3),4*Math.ceil(a/3)),o=new Uint8Array(i);for(t=2,r=0;(0|t)<(0|a);t=(t+3|0)>>>0,r=(r+4|0)>>>0)o[r]=255&n[e[t-2|0]>>2],o[r+1|0]=255&n[(3&e[t-2|0])<<4|e[t-1|0]>>4],o[r+2|0]=255&n[(15&e[t-1|0])<<2|e[t]>>6],o[r+3|0]=255&n[63&e[t]];(0|t)==(a+1|0)&&(o[r]=255&n[e[t-2|0]>>2],o[r+1|0]=255&n[(3&e[t-2|0])<<4],o[r+2|0]=255&"=".charCodeAt(0),o[r+3|0]=255&"=".charCodeAt(0),r=(r+4|0)>>>0),(0|t)==(0|a)&&(o[r]=255&n[e[t-2|0]>>2],o[r+1|0]=255&n[(3&e[t-2|0])<<4|e[t-1|0]>>4],o[r+2|0]=255&n[(15&e[t-1|0])<<2],o[r+3|0]=255&"=".charCodeAt(0),r=(r+4|0)>>>0);var c="";for(t=0;t<o.length;t=(t+1024|0)>>>0)c=c.concat(String.fromCharCode.apply(null,o.subarray(t,Math.min(t+1024|0,o.length))));return c};var r=Uint8Array.of(255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51);function a(e){return 255&(0|r[e=255&(0|e)])}function i(e){return(a(e[0])<<18|a(e[1])<<12|a(e[2])<<6|a(e[3])|0)>>>0}r.length,t.prototype.base64ToBytes=function(e,t,n){t|=0;var r=new Uint8Array(e.length-t|0),a=r.length,o=0,c=0;for(o=0,c=t;(o+7|0)<(0|a);o=(o+8|0)>>>0,c=(c+8|0)>>>0)r[0|o]=255&e.charCodeAt(0|c),r[o+1|0]=255&e.charCodeAt(c+1|0),r[o+2|0]=255&e.charCodeAt(c+2|0),r[o+3|0]=255&e.charCodeAt(c+3|0),r[o+4|0]=255&e.charCodeAt(c+4|0),r[o+5|0]=255&e.charCodeAt(c+5|0),r[o+6|0]=255&e.charCodeAt(c+6|0),r[o+7|0]=255&e.charCodeAt(c+7|0);for(;(0|o)<(0|a);o=(o+1|0)>>>0,c=(c+1|0)>>>0)r[0|o]=255&e.charCodeAt(0|c);var f,d,s,y,u,h=e.endsWith("==")?2:e.endsWith("=")?1:0,p=e.length-t|0,b=new Uint8Array(p/4*3),A=new Uint8Array(16);for(o=0,c=0;(o+16|0)<(0|p);o=(o+16|0)>>>0,c=(c+12|0)>>>0)A=r.slice(0|o,o+16|0),b.set((f=i(A.subarray(0,4)),d=i(A.subarray(4,8)),s=i(A.subarray(8,12)),y=i(A.subarray(12,16)),Uint8Array.of(f>>16,f>>8&255,255&f,d>>16,d>>8&255,255&d,s>>16,s>>8&255,255&s,y>>16,y>>8&255,255&y)),c);for(;(0|o)<(0|p);o=(o+4|0)>>>0,c=(c+3|0)>>>0)b.set((u=i(r.slice(0|o,o+4|0)),Uint8Array.of(u>>16,u>>8&255,255&u)),c);return new n(b.buffer.slice(0,b.length-h))},t.TYPES=[{id:0,name:"undefined",typeof:"undefined",instanceof:void 0},{id:1,name:"null",typeof:"object",instanceof:void 0},{name:"NaN",id:2,typeof:"number",instanceof:Object},{name:"Infinity",id:3,typeof:"number",instanceof:void 0},{name:"Boolean",id:4,typeof:"boolean",instanceof:void 0},{name:"Int32",id:5,typeof:"number",instanceof:void 0},{name:"Uint32",id:6,typeof:"number",instanceof:void 0},{name:"Float32",id:7,typeof:"number",instanceof:void 0},{name:"BigInt64",id:8,typeof:"number",instanceof:void 0},{name:"Float64",id:9,typeof:"number",instanceof:void 0},{name:"String",id:10,typeof:"string",instanceof:""},{name:"ArrayBuffer",id:11,typeof:"object",instanceof:ArrayBuffer},{name:"Int8Array",id:12,typeof:"object",instanceof:Int8Array},{name:"Uint8Array",id:13,typeof:"object",instanceof:Uint8Array},{name:"Uint8ClampedArray",id:14,typeof:"object",instanceof:Uint8ClampedArray},{name:"Int16Array",id:15,typeof:"object",instanceof:Int16Array},{name:"Uint16Array",id:16,typeof:"object",instanceof:Uint16Array},{name:"Int32Array",id:17,typeof:"object",instanceof:Int32Array},{name:"Uint32Array",id:18,typeof:"object",instanceof:Uint32Array},{name:"Float32Array",id:19,typeof:"object",instanceof:Float32Array},{name:"Float64Array",id:20,typeof:"object",instanceof:Float64Array},{name:"BigInt64Array",id:21,typeof:"object",instanceof:BigInt64Array},{name:"BigUint64Array",id:22,typeof:"object",instanceof:BigUint64Array},{name:"Array",id:23,typeof:"object",instanceof:Array},{name:"Object",id:24,typeof:"object",instanceof:""}],t.textEncoder=new TextEncoder,t.textDecoder=new TextDecoder,t.encodeString=function(e){return t.textEncoder.encode(e)},t.decodeBuffer=function(e){return t.textDecoder.decode(e)},t.prototype.getTypeFromData=function(e){switch(typeof e){case"object":if(null==e)return t.TYPES[1];if(e instanceof ArrayBuffer)return t.TYPES[11];if("buffer"in e){if(e.buffer instanceof ArrayBuffer){for(var n=12;n<=22;n++)if(e instanceof t.TYPES[n].instanceof)return t.TYPES[n];return t.TYPES[24]}return t.TYPES[24]}return e instanceof Array?t.TYPES[23]:t.TYPES[24];case"number":return e==1/0?t.TYPES[3]:NaN==e?t.TYPES[2]:e!==(0|e)?t.TYPES[7]:(e|=0)<0?e<-2147483648?t.TYPES[8]:t.TYPES[5]:e<=4294967295?t.TYPES[6]:t.TYPES[8];case"string":return t.TYPES[10];case"undefined":default:return t.TYPES[0];case"bigint":return t.TYPES[8];case"boolean":return t.TYPES[4]}},t.prototype.stringify=function(e){var t=this.bytesToBase64,n=this.getTypeFromData;function r(e){return n(e)}return JSON.stringify(function e(n){var a,i=r(n);return(0|i.id)<=22&&(0|i.id)>=12?n="$TA_"+i.id+"_B64$"+(a=n.buffer,t(new Uint8Array(a))):23==(0|i.id)?n.forEach((function(t,a){var i=r(t).id;(0|i)>=12&&(0|i)<=24&&(n[a]=e(t))})):24==(0|i.id)&&Object.entries(n).forEach((function(t){var a=r(t[1]).id;(0|a)>=12&&(0|a)<=24&&(n[t[0]]=e(t[1]))})),n}(e))},t.prototype.parse=function(e){var n=this.base64ToBytes,r=this.getTypeFromData,a=t.TYPES;return function e(t){var i,o,c,f=function(e){return r(e)}(t);if(10==(0|f.id)){if(t.startsWith("$TA_")){var d=parseInt(t.charAt(4)+t.charAt(5),10);i=t,o=11,c=a[d].instanceof,t=n(i,o,c)}}else 23==(0|f.id)?t.forEach((function(n,r){t[r]=e(n)})):24==(0|f.id)&&Object.entries(t).forEach((function(n){t[n[0]]=e(n[1])}));return t}(JSON.parse(e))},t.prototype.pack=function(e){this.chunck_size;var n=0,r=(this.packed_body,this.getTypeFromData),a=[];function i(e){return r(e)}var o=JSON.stringify(function e(t){var r,o,c,f,d=i(t);return(0|d.id)<=22&&(0|d.id)>=12?t="$TA_"+d.id+"_PA&"+(o=(r=t)instanceof Uint8Array?r:new Uint8Array(r.buffer),c=0|n,f=n+o.length|0,a.push(o),n=0|f,"F="+c.toString()+"T="+f.toString()+"$"):23==(0|d.id)?t.forEach((function(n,r){var a=i(n).id;(10==a||a<=24&&(e=>12))&&(t[0|r]=e(n))})):24==(0|d.id)&&Object.entries(t).forEach((function(n){var r=i(n[1]).id;(10==r||r<=24&&(e=>12))&&(t[n[0]]=e(n[1]))})),t}(e)),c=2*o.length+5,f=new Uint8Array(0);this.packed_head.length<c&&(this.packed_head=new Uint8Array(c));var d=t.textEncoder.encodeInto(o,this.packed_head),s={read:0,written:0};o.length>d.read&&(f=new Uint8Array(3*(o.length-d.read)),s=t.textEncoder.encodeInto(o.slice(d.read,o.length),f));var y,u=new Uint8Array(0),h=0;0===s.written?h=(y=this.packed_head.subarray(0,d.written)).length:(y=this.packed_head.subarray(0,d.written),u=f.subarray(0,s.written),h=y.length+u.length);var p=4+h+n;this.packed_body.length<p&&(this.packed_body=new Uint8Array(p)),this.packed_body[0]=h>>0&255,this.packed_body[1]=h>>8&255,this.packed_body[2]=h>>16&255,this.packed_body[3]=h>>24&255,this.packed_body.set(y,4),u.length>0&&this.packed_body.set(u,y.length+4);for(var b=4+h|0,A=0;(0|A)<(0|a.length);A=A+1|0)this.packed_body.set(a[0|A],0|b),b+=a[0|A].length;return this.packed_body.slice(0,p)},t.prototype.unpack=function(e){var n=this.getTypeFromData,r=t.TYPES,a=4+(0|e[0]<<0|e[1]<<8|e[2]<<16|e[3]<<24)|0;function i(e){return n(e)}return function t(n){switch(i(n).id){case 10:if(n.startsWith("$TA_")){var o=parseInt(n.charAt(4)+n.charAt(5)),c=(n=n.slice(12,n.length-1)).split("T="),f=parseInt(c[0]),d=parseInt(c[1]);n=function(t,n,r){return new r(e.slice(a+t,a+n).buffer)}(f,d,r[o].instanceof)}break;case 23:n.forEach((function(e,r){var a=i(e).id;10!=(0|a)&&23!=(0|a)&&24!=(0|a)||(n[0|r]=t(e))}));break;case 24:Object.entries(n).forEach((function(e){var r=i(e[1]).id;10!=(0|r)&&23!=(0|r)&&24!=(0|r)||(n[e[0]]=t(e[1]))}))}return n}(JSON.parse(t.decodeBuffer(e.subarray(4,a))))},e.exports=t,e=e.exports}();